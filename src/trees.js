var trees = {
    type: 'trees',
    list: {
      'tree-01': {
        name: 'tree-01',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-02': {
        name: 'tree-02',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-03': {
        name: 'tree-03',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-05': {
        name: 'tree-05',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-06': {
        name: 'tree-06',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-07': {
        name: 'tree-07',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: 0,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [1, 0]
        ],
        gridBuild: [
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-08': {
        name: 'tree-08',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 24,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-11': {
        name: 'tree-11',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-12': {
        name: 'tree-12',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-16': {
        name: 'tree-16',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-17': {
        name: 'tree-17',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [1, 0]
        ],
        gridBuild: [
          [0, 0],
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'desert-tree-04': {
        name: 'desert-tree-04',
        label: 'Tree',
        pixelWidth: 23,
        pixelHeight: 23,
        pixelOffsetX: 0,
        pixelOffsetY: 0,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [1]
        ],
        gridBuild: [
          [1]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'desert-tree-09': {
        name: 'desert-tree-09',
        label: 'Tree',
        pixelWidth: 47,
        pixelHeight: 23,
        pixelOffsetX: 0,
        pixelOffsetY: 0,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [1, 0]
        ],
        gridBuild: [
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'desert-tree-08': {
        name: 'desert-tree-08',
        label: 'Tree',
        pixelWidth: 48,
        pixelHeight: 25,
        pixelOffsetX: 0,
        pixelOffsetY: -1,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [1, 0]
        ],
        gridBuild: [
          [1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'desert-tree-18': {
        name: 'desert-tree-18',
        label: 'Tree',
        pixelWidth: 71,
        pixelHeight: 47,
        pixelOffsetX: -23,
        pixelOffsetY: -23,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0],
          [0, 1]
        ],
        gridBuild: [
          [0, 0],
          [0, 1]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-cluster-01': {
        name: 'tree-cluster-01',
        label: 'Tree',
        pixelWidth: 72,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0, 0],
          [1, 1, 0]
        ],
        gridBuild: [
          [0, 0, 0],
          [1, 1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-cluster-02': {
        name: 'tree-cluster-02',
        label: 'Tree',
        pixelWidth: 72,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0, 0],
          [1, 1, 0]
        ],
        gridBuild: [
          [0, 0, 0],
          [1, 1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-cluster-03': {
        name: 'tree-cluster-03',
        label: 'Tree',
        pixelWidth: 72,
        pixelHeight: 48,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 1, 1],
          [1, 1, 0]
        ],
        gridBuild: [
          [0, 1, 1],
          [1, 1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-cluster-04': {
        name: 'tree-cluster-04',
        label: 'Tree',
        pixelWidth: 96,
        pixelHeight: 72,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0, 0, 0],
          [1, 1, 1, 0],
          [1, 0, 0, 0]
        ],
        gridBuild: [
          [0, 0, 0, 0],
          [1, 1, 1, 0],
          [1, 0, 0, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      },
      'tree-cluster-05': {
        name: 'tree-cluster-05',
        label: 'Tree',
        pixelWidth: 96,
        pixelHeight: 72,
        pixelOffsetX: 0,
        pixelOffsetY: -24,
        hitPoints: 600,
        armor: 1,
        gridShape: [
          [0, 0, 1, 0],
          [1, 1, 1, 0],
          [0, 1, 1, 0]
        ],
        gridBuild: [
          [0, 0, 1, 0],
          [1, 1, 1, 0],
          [0, 1, 1, 0]
        ],
        spriteImages: [{
          name: 'default',
          count: 10
        }]
      }
    },
    defaults: {
      z: 0,
      unselectable: true,
      unattackable: true,
      processOrders: function () {
        this.lifeCode = getLifeCode(this)
      },
      draw: function () {
        var x = Math.round(this.x * game.gridSize) - game.viewportX + game.viewportLeft
        var y = Math.round(this.y * game.gridSize) - game.viewportY + game.viewportTop
        if (x < -this.pixelWidth || y < -this.pixelHeight || x > game.viewportWidth || y > game.viewportHeight) {
          return
        }
        game.foregroundContext.drawImage(this.spriteCanvas, this.imageOffset * this.pixelWidth, 0, this.pixelWidth, this.pixelHeight, x, y, this.pixelWidth, this.pixelHeight)
      },
      animate: function () {
        if (this.lifeCode == 'dead') {
          game.remove(this)
          return
        }
        this.imageOffset = 0
      }
    },
    add: function (details) {
      var item = {}
      var name = details.name
      $.extend(item, this.defaults)
      $.extend(item, this.list[name])
      item.life = item.hitPoints
      $.extend(item, details)
      item.cgX = item.x + item.pixelWidth / 2 / game.gridSize
      item.cgY = item.y + item.pixelHeight / game.gridSize
      item.softCollisionRadius = item.pixelHeight / 2
      return item
    },
    load: function (name) {
      console.log('Loading', name, '...')
      var item = this.list[name]
      if (item.spriteCanvas) {
        return
      }
      item.type = this.type
      item.spriteCanvas = document.createElement('canvas')
      item.spriteSheet = loader.loadImage('images/' + this.type + '/' + name + '-sprite-sheet.png', function (image) {
        createSpriteSheetCanvas(image, item.spriteCanvas, 'colormap')
      })
      item.spriteArray = []
      item.spriteCount = 0
      for (var i = 0; i < item.spriteImages.length; i++) {
        var constructImageCount = item.spriteImages[i].count
        var constructImageName = item.spriteImages[i].name
        if (item.spriteImages[i].direction) {
          for (var j = 0; j < item.directions; j++) {
            item.spriteArray[constructImageName + '-' + j] = {
              name: constructImageName + '-' + j,
              count: constructImageCount,
              offset: item.spriteCount
            }
            item.spriteCount += constructImageCount
          }
        } else {
          item.spriteArray[constructImageName] = {
            name: constructImageName,
            count: constructImageCount,
            offset: item.spriteCount
          }
          item.spriteCount += constructImageCount
        }
      }
    }
  }